# Maintainer: Xiao-Long Chen <chenxiaolong@cxl.epac.to>

pkgname=unity-system-compositor-bzr
pkgver=25
pkgrel=1
pkgdesc="System compositor for Ubuntu"
arch=('i686' 'x86_64')
url="https://launchpad.net/unity-system-compositor"
license=('GPL')
groups=('unitynext')
depends=('boost' 'mir-bzr' 'protobuf')
makedepends=('bzr' 'cmake')
provides=('unity-system-compositor')
conflicts=('unity-system-compositor')
source=("unity-system-compositor::bzr+http://bazaar.launchpad.net/~unity-system-compositor-team/unity-system-compositor/trunk/")
sha512sums=('SKIP')

pkgver() {
  cd unity-system-compositor
  bzr revno
}

build() {
  cd "${srcdir}/unity-system-compositor"
  cmake . -DCMAKE_INSTALL_PREFIX=/usr
  make
}

package() {
  cd "${srcdir}/unity-system-compositor"
  make DESTDIR="${pkgdir}/" install
}
